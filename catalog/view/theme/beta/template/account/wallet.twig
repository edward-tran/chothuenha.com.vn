{{ header }}
<div class="append_html_filter append_pagination">
<div id="account-account" class="">
  <div class="sc-imcLir cExqpY ">
    {{ column_left }}
   <div class="sc-bHKNvF folniP col-lg-10 col-md-9 col-sm-9 col-xs-12">
   <div class="sc-fweGeb kUzkwc">
      <div class="sc-ibushM dhggPq">
         <ul class="sc-heOwwK izlmnd"></ul>
      </div>
   </div>
   <div class="sc-jTWTst hYLsTD">
      <div class="sc-cHOiLE SLkmA">
         <div class="sc-hymtyp bjqBjR">
            <h3 type="primary" class="sc-dlfnbm lhekIy">Thông tin số dư</h3>
         </div>
        
      </div>
   </div>
 
   <div class="sc-jhSEkC COfqa">
      <div class="sc-jLNwoM jvBuwT">

                {% if products %}
                <div class="panel-body">
                  <form action="{{ delete }}" method="post" enctype="multipart/form-data" id="form-product">
                    <div class="table-responsive">
                      <table class="table table-hover">
                        <thead>
                          <tr>
                            <th scope="col" style="width: 1px;" class="text-center checkbox clip-check check-primary">
                              <input type="checkbox" onclick="$('input[name*=\'selected\']').prop('checked', this.checked);" id="checkbox"/>
                              <label for="checkbox"></label>
                            </th>
                            <th scope="col" class="text-left">Mã tin đăng</th>
                            <th scope="col" class="text-left">Hình ảnh</th>
                            <th scope="col" class="text-left" style="width: 15%">{% if sort == 'pd.name' %} <a ui-sref="{{ sort_name }}" class="{{ order|lower }}">Tên bài đăng</a> {% else %} <a ui-sref="{{ sort_name }}">Tên bài đăng</a> {% endif %}</th>
                            <th scope="col" class="text-left">Ngày báo xấu</th>
                            <th scope="col" class="text-left">Nội dung</th>
                        </thead>
                        <tbody>

                        {% for product in products %}
                        <tr>
                          <td class="text-center checkbox clip-check check-primary">{% if product.product_id in selected %}
                            <input type="checkbox" name="selected[]" value="{{ product.product_id }}" checked="checked" id="{{ product.product_id }}"/>
                             <label for="{{product.product_id}}"></label>
                            {% else %}
                            <input type="checkbox" name="selected[]" value="{{ product.product_id }}" id="{{ product.product_id }}"/>
                            <label for="{{product.product_id}}"></label>
                            {% endif %}</td>
                          <td class="text-left">{{ product.model }}</td>
                          <td class="text-left">{% if product.image %} <img src="{{ product.image }}" alt="{{ product.name }}" class="img-thumbnail width-height-100" /> {% else %} <span class="img-thumbnail list"><i class="fa fa-camera fa-2x"></i></span> {% endif %}</td>
                          <td class="text-left">{{ product.name }}</td>
                          <td class="text-left">
                            <span class="">{{ product.date_added }}</span>
                          </td>
                          <td class="text-left">
                            <span class="">{{ product.info }}</span>
                          </td>
                        </tr>
                        {% endfor %}
                          </tbody>
                        
                      </table>
                    </div>
                  </form>
                   <div class="row">
                      <input type="hidden" name="url_pagination" value="{{ url_pagination }}">
                      <input type="hidden" name="url_current" value="{{ url_current }}">
                      <div class="col-sm-12 text-center">
                        {{ pagination }}
                      </div>
                      <div class="col-sm-12 text-center">
                        {{ results }}
                      </div>
                  </div>
                </div>
                {% else %}

                 <div class="sc-gPcUgC gSARDW">
                    <div class="sc-cWFsfX jumoYP">
                       <div class="sc-cCGtLG jPMGAU">
                          <svg width="130" height="130" viewBox="0 0 130 130" fill="none" xmlns="http://www.w3.org/2000/svg">
                             <path d="M118.42 75.84C118.43 83.2392 116.894 90.5589 113.91 97.33H16.09C12.8944 90.0546 11.3622 82.1579 11.6049 74.2154C11.8477 66.2728 13.8593 58.4844 17.4932 51.4177C21.1271 44.3511 26.2918 38.1841 32.6109 33.3662C38.9299 28.5483 46.2443 25.2008 54.0209 23.5676C61.7976 21.9345 69.8406 22.0568 77.5639 23.9257C85.2873 25.7946 92.4965 29.363 98.6661 34.3709C104.836 39.3787 109.81 45.6999 113.228 52.8739C116.645 60.0478 118.419 67.8937 118.42 75.84Z" fill="#F2F2F2"></path>
                             <path d="M4.57999 97.33H125.42" stroke="#63666A" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"></path>
                             <path d="M75.7616 35.4199L31.6067 42.0504C30.4707 42.221 29.688 43.2802 29.8586 44.4162L38.8934 104.582C39.0639 105.718 40.1232 106.5 41.2592 106.33L85.4141 99.6992C86.5501 99.5286 87.3328 98.4694 87.1622 97.3333L78.1274 37.1679C77.9568 36.0319 76.8976 35.2493 75.7616 35.4199Z" fill="#D7D7D7" stroke="#63666A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                             <path d="M94.69 94.57V111.35C94.69 111.615 94.5847 111.87 94.3971 112.057C94.2096 112.245 93.9552 112.35 93.69 112.35H47.85C47.5848 112.35 47.3304 112.245 47.1429 112.057C46.9554 111.87 46.85 111.615 46.85 111.35V48.65C46.85 48.3848 46.9554 48.1305 47.1429 47.9429C47.3304 47.7554 47.5848 47.65 47.85 47.65H83.06L94.69 59.25V85.39" fill="white"></path>
                             <path d="M94.69 94.57V111.35C94.69 111.615 94.5847 111.87 94.3971 112.057C94.2096 112.245 93.9552 112.35 93.69 112.35H47.85C47.5848 112.35 47.3304 112.245 47.1429 112.057C46.9554 111.87 46.85 111.615 46.85 111.35V48.65C46.85 48.3848 46.9554 48.1305 47.1429 47.9429C47.3304 47.7554 47.5848 47.65 47.85 47.65H83.06L94.69 59.25V85.39" stroke="#63666A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                             <path d="M94.69 59.25H83.06V47.63L94.69 59.25Z" fill="#A7A7A7" stroke="#63666A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                          </svg>
                       </div>
                       <div class="sc-iBPRYJ oLMna sc-gbkRTH fblxkw" type="tertiary">Số dư của bạn đang có</div>
                       <a href="javascript:;">
                          <button type="solid" color="primary" class="sc-kLgntA cIlsIO">
                             <div class="sc-iktFzd gaGeRK"><span type="primary" class="sc-iwyYcG gBmyGv">
                               {{ amount }}
                             </span></div>
                          </button>
                       </a>
                    </div>
                 </div>
                {% endif %}


      </div>
      <div></div>
      <div></div>
   </div>
</div>


</div>
</div>
</div>



<script type="text/javascript">
  $('#exportExcel').on('click', function(e) {
    printExcelProducts();
    e.preventDefault();
  });

  function printExcelProducts() {
    var form = $('#form-product');
    let dataForm                 = $(form).serialize();
    let dataForms                 = $(form).serializeJSON();
    let arr_selected = encodeURIComponent(JSON.stringify(dataForms.selected));
    if(arr_selected == 'undefined') {
      $('.title_message').html('Đã xảy ra lỗi');
      $('.image_message').attr('src', 'image/data/error-905.svg');
      $('.description_message').html('Vui lòng chọn ít nhất 1 tin đăng để xuất file!');
      $('#success_modal').modal('show');
      return;
    }
    
    var router  = 'index.php?routing=account/product/excelProducts';
    window.location.href = router+'&selected='+arr_selected;
  }
</script>

{{ footer }}